<nz-page-header
  class="site-page-header"
>
  <nz-breadcrumb nz-page-header-breadcrumb>
    <nz-breadcrumb-item>Phòng</nz-breadcrumb-item>
    <nz-breadcrumb-item>Quản lý phòng đặt</nz-breadcrumb-item>
  </nz-breadcrumb>
</nz-page-header>

<div class="page-content">
  <div>
    <div class="flex">
      <div style="font-size: 18px;margin-left: 10px;font-family: Arial">
        <label>Ngày nhận phòng</label>
        <input type="date" id="checkIn"
               style="width: 200px;height:30px;border-radius: 5px;border: 1px solid lightskyblue;margin-left: 10px;margin-top: 10px;padding: 5px">
      </div>
      <div style="font-size: 18px;margin-left: 30px;font-family: Arial">
        <label>Ngày trả phòng</label>
        <input type="date" id="checkOut"
               style="width: 200px;height:30px;border-radius: 5px;border: 1px solid lightskyblue;margin-left: 10px;margin-top: 10px;padding: 5px">
      </div>
      <div style="font-size: 18px;margin-left: 30px;font-family: Arial;margin-top: 10px">
        <label>Loại phòng</label>
        <select id="tenLoaiPhong" class="select-input"
                style="width: 300px;height: 30px;font-size: 18px;border-width: 1px; border-style: solid; border-color: dodgerblue;border-radius: 3px;margin-left: 10px"
        >
          <option class="option" value="">Tất cả</option>
          <option class="option" *ngFor="let data of roomType"
                  [label]="data.tenLoaiPhong ? data.tenLoaiPhong : 'Chọn loại phòng'"
                  [value]="data.tenLoaiPhong"></option>
        </select>
      </div>
      <!--      <div style="font-size: 18px;margin-left: 30px;font-family: Arial;margin-top: 10px">-->
      <!--        <label>Trạng thái phòng</label>-->
      <!--        <select id="trangThai" class="select-input"-->
      <!--                style="width: 200px;height: 30px;font-size: 18px;border-width: 1px; border-style: solid; border-color: dodgerblue;border-radius: 3px;margin-left: 10px"-->
      <!--        >-->
      <!--          <option class="option" value="0">Tất cả</option>-->
      <!--          <option class="option" value="1">Đã check-in</option>-->
      <!--          <option class="option" value="2">Chờ check-in</option>-->
      <!--        </select>-->
      <!--      </div>-->
    </div>
    <div class="flex">
      <div style="font-size: 18px;margin-left: 10px;font-family: Arial;margin-top: 10px">
        <label>Khách hàng: </label>
        <input id="khachHang"
               style="width: 400px;height:30px;border-radius: 5px;border: 1px solid lightskyblue;margin-left: 10px;margin-top: 30px;padding: 5px"
               placeholder="Nhập tên hoặc số CCCD khách hàng">
      </div>
      <div style="margin-left: 30px;margin-top: 30px">
        <button (click)="resetSearch()" class="button-danger"
        >
          Đặt lại
        </button>
      </div>
      <div style="margin-left: 30px">
        <button (click)="searchRoom('top')" style="margin-top: 30px;" class="relative inline-flex items-center justify-center p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium
      text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-blue-500 group-hover:from-cyan-500
      group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-cyan-200 dark:focus:ring-cyan-800">
                <span
                  class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0">
          Tìm kiếm
                </span>
        </button>
      </div>

      <div style="margin-left: 30px">
        <button (click)="getRoomToDay()" style="margin-top: 30px;" class="relative inline-flex items-center justify-center p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium
      text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-yellow-500 group-hover:from-cyan-500
      group-hover:to-yellow-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-cyan-200 dark:focus:ring-cyan-800">
                <span
                  class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0">
          Hôm nay
                </span>
        </button>
      </div>
    </div>
    <!--    <nz-table class="w-full text-sm text-left text-gray-500 dark:text-gray-400" #tableData [nzData]="room">-->
    <!--      <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">-->
    <!--      <tr>-->
    <!--        <th scope="col" class="px-6 py-3">-->
    <!--          STT-->
    <!--        </th>-->
    <!--        <th scope="col" class="px-6 py-3">-->
    <!--          Mã số phòng-->
    <!--        </th>-->
    <!--        <th scope="col" class="px-6 py-3">-->
    <!--          Ngày đặt-->
    <!--        </th>-->
    <!--        <th scope="col" class="px-6 py-3">-->
    <!--          Ngày check-in-->
    <!--        </th>-->
    <!--        <th scope="col" class="px-6 py-3">-->
    <!--          Ngày check-out-->
    <!--        </th>-->
    <!--      </tr>-->
    <!--      </thead>-->
    <!--    </nz-table>-->
    <hr style="margin: 10px;">
    <div style="margin-top: 10px">
      <div nz-row>
        <div *ngFor="let data of roomMapping" nz-col nzSpan="6">
          <div (click)="showListDP(data.id)"
               style="border: 1px solid gray;border-radius: 5px;margin: 10px;height: 250px;background-color: lightskyblue">
            <p
              style="text-align: center;font-family: 'Roboto Mono', monospace;font-size: 22px;font-weight: bold;color: grey;margin: 3px">
              Phòng {{data.ma}}
            </p>
            <hr style="margin: 5px;color: #5e2ced">
            <div *ngIf="data.id" style="font-size: 15px;padding-left: 5px">
              <div class="flex">
                <div class="flex" style="width: 50%">
                  <span nz-icon nzType="home" nzTheme="outline"></span>
                  <p style="margin-top: -3px;margin-left: 5px"> {{data.tenLoaiPhong}}</p>
                </div>
                <div class="flex" style="margin-left: 10px">
                  <span nz-icon nzType="team" nzTheme="outline"></span>
                  <p style="margin-top: -3px;margin-left: 5px"> {{data.soNguoi}} người</p>
                </div>
              </div>

              <!--              <div class="flex">-->
              <!--                <div class="flex" style="width: 50%">-->
              <!--                  <span nz-icon nzType="user" nzTheme="outline"></span>-->
              <!--                  <p style="margin-top: -3px;margin-left: 5px"> {{data.hoTen}}</p>-->
              <!--                </div>-->
              <!--                <div class="flex" style="margin-left: 10px">-->
              <!--                  <span nz-icon nzType="check" nzTheme="outline"></span>-->
              <!--                  <p style="margin-top: -3px;margin-left: 5px" *ngIf="data.trangThai == 2">Đã-->
              <!--                    check-in</p>-->
              <!--                  <p style="margin-top: -3px;margin-left: 5px" *ngIf="data.trangThai == 1">Chờ-->
              <!--                    check-in</p>-->
              <!--                </div>-->
              <!--              </div>-->

              <!--              <div class="flex" style="margin-top: 20px">-->
              <!--                <span nz-icon nzType="field-time" nzTheme="outline"></span>-->
              <!--                <p style="margin-top: -3px;margin-left: 5px">{{ data.checkIn | date : 'dd-MM-yyyy'}}-->
              <!--                  - {{ data.checkOut | date : 'dd-MM-yyyy'}}</p>-->
              <!--              </div>-->

              <div *ngIf="data.soPhong > 0">
                <br>
                <p style="font-size: 30px;text-align: center">Lượt đặt: {{data.soPhong}}</p>
<!--                <p style="font-size: 30px;text-align: center">Lượt đặt: {{getSoLanDatPhong(data.id)}}</p>-->
              </div>
              <div *ngIf="data.soPhong == 0">
                <br>
                <p style="font-size: 30px;text-align: center">Sẵn sàng đón khách</p>
              </div>
              <div style="color: black;margin: 10px">
                <br>
                <nz-spin nzTip="Vui lòng chờ..." [nzSize]="'large'" *ngIf="isVisibleSpin && data.id == idPhong">
                </nz-spin>
              </div>
            </div>
            <!--            <div *ngIf="!data.idDatPhong">-->
            <!--              <p style="font-size: 30px;text-align: center">Sẵn sàng đón khách</p>-->
            <!--            </div>-->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<nz-modal
  [(nzVisible)]="isVisibleListDP"
  nzTitle="THÔNG TIN ĐẶT PHÒNG"
  (nzOnCancel)="handleCancelListDP()"
  (nzOnOk)="onOk()"
  nzWidth="900px"
  nzFooter=" "
>
  <ng-container *nzModalContent>
    <div *ngIf="room.length > 0">
      <nz-table #basicTable [nzData]="room">
        <thead>
        <tr>
          <th>STT</th>
          <th>Số phòng</th>
          <th>Loại phòng</th>
          <th>Giá phòng</th>
          <th>Ngày đặt</th>
          <th>Ngày nhận phòng</th>
          <th>Ngày trả phòng</th>
          <th>Trạng thái</th>
          <th>Tác vụ</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let data of basicTable.data.slice(0,2);let i = index;">
          <td>{{ i + 1 }}</td>
          <td>{{ data.tenPhong }}</td>
          <td>{{ data.tenLoaiPhong }}</td>
          <td>{{ data.giaPhong }}</td>
          <td>{{ data.ngayDat | date : 'dd-MM-yyyy' }}</td>
          <td>{{ data.checkIn | date : 'dd-MM-yyyy' }}</td>
          <td>{{ data.checkOut | date : 'dd-MM-yyyy' }}</td>
          <td>{{ data.trangThai == 1 ? 'Chờ nhận phòng' : data.trangThai == 2 ? 'Đã nhận phòng' : data.trangThai == 3 ? 'Đã trả phòng' : 'Đã hủy'}}</td>
          <td>
            <button><span nz-icon nzType="eye" nzTheme="outline" nz-tooltip nzTooltipTitle="Xem"
                          (click)="viewRoom(data.idDatPhong, data.idHoaDon, data.idDatPhong)"></span></button>
          </td>
        </tr>
        </tbody>
      </nz-table>
    </div>
    <div *ngIf="room.length == 0">
      <p style="font-size: 30px;text-align: center">Hiện chưa có khách đặt phòng trong khoảng thời gian này!</p>
      <div style="display: flex;justify-content: center;align-items: center">
        <button (click)="showOrderRoom()" style="margin-top: 30px;" class="relative inline-flex items-center justify-center p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium
      text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-yellow-500 group-hover:from-cyan-500
      group-hover:to-yellow-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-cyan-200 dark:focus:ring-cyan-800">
                <span
                  class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0">
          Đặt ngay
                </span>
        </button>
      </div>
    </div>
  </ng-container>
</nz-modal>

<nz-modal
  [(nzVisible)]="isVisible"
  nzTitle="THÔNG TIN PHÒNG"
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="onOk()"
  nzWidth="full"
  nzFooter=" "
>
  <ng-container *nzModalContent>
    <div>
      <div>
        <p style="text-align: center;font-size: 30px;font-weight:bolder;margin-bottom: 5px">Phòng
          số {{roomModel.tenPhong}}</p>
        <hr>
      </div>
      <br>
      <div *ngIf="roomModel.idDatPhong" class="flex">
        <div style="width: 68%;">
          <div style="height: 400px;border: 1px solid darkgrey;border-radius: 5px;margin: 5px">
            <div style="height: 35px;background-color: deepskyblue">
              <p style="color: white;font-weight: bolder;font-size: 16px;padding: 3px;padding-left: 10px">Chi tiết thuê
                phòng</p>
            </div>
            <div style="padding:10px;padding-top:10px;font-size: 15px;font-weight: bolder;height: 60px;width: 100%"
                 class="flex">
              <p>Khách hàng: </p>
              <p style="color:red;"> {{roomModel.hoTen}}</p>
              <p style="padding-left: 30px">Số phòng: </p>
              <p style="color:red;"> {{roomModel.tenPhong}}</p>
              <p style="padding-left: 30px">Ngày đặt: </p>
              <p style="color:red;"> {{roomModel.ngayDat | date : 'dd-MM-yyyy'}}</p>
              <p style="padding-left: 30px">Ngày nhận phòng: </p>
              <p style="color:red;"> {{roomModel.checkIn | date : 'dd-MM-yyyy'}}</p>
              <p style="padding-left: 30px">Ngày trả phòng: </p>
              <p style="color:red;"> {{roomModel.checkOut | date : 'dd-MM-yyyy'}}</p>
              <div style="width: 10%">
                <button (click)="showFormCheckIn(roomModel.idDatPhong)" style="margin-top: -5px;margin-left: 40px"
                        class="button-blue"
                        *ngIf="roomModel.trangThai == 1">
                  Check-in
                </button>
                <button (click)="showFormCheckout(roomModel.idDatPhong)" style="margin-top: -5px;margin-left: 40px"
                        class="button-blue"
                        *ngIf="roomModel.trangThai == 2">
                  Check-out
                </button>
                <div *ngIf="roomModel.trangThai == 3">
                  <p style="font-size: 15px;font-weight: bolder;margin-left: 5px;color: red">(Đã trả phòng)</p>
                </div>
              </div>
            </div>
            <hr>
            <div>
              <h3 style="font-weight: bolder;font-size: 16px;padding: 5px">Danh sách phòng cùng đặt</h3>
              <nz-table #basicTable [nzData]="roomOfBill">
                <thead>
                <tr>
                  <th>STT</th>
                  <th>Số phòng</th>
                  <th>Loại phòng</th>
                  <th>Giá phòng</th>
                  <th>Ngày đặt</th>
                  <th>Ngày nhận phòng</th>
                  <th>Ngày trả phòng</th>
                  <th>Trạng thái</th>
                  <th>Tác vụ</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let data of basicTable.data;let i = index;">
                  <td>{{ i + 1 }}</td>
                  <td>{{ data.tenPhong }}</td>
                  <td>{{ data.tenLoaiPhong }}</td>
                  <td>{{ data.giaPhong }}</td>
                  <td>{{ data.ngayDat | date : 'dd-MM-yyyy' }}</td>
                  <td>{{ data.checkIn | date : 'dd-MM-yyyy' }}</td>
                  <td>{{ data.checkOut | date : 'dd-MM-yyyy' }}</td>
                  <td>{{ data.trangThai == 1 ? 'Chờ nhận phòng' : data.trangThai == 2 ? 'Đã nhận phòng' : data.trangThai == 3 ? 'Đã trả phòng' : 'Đã hủy'}}</td>
                  <td>
                    <button><span nz-icon nzType="eye" nzTheme="outline" nz-tooltip nzTooltipTitle="Xem"
                                  (click)="viewRoom(data.idDatPhong, data.idHoaDon, data.idDatPhong)"></span></button>
                  </td>
                </tr>
                </tbody>
              </nz-table>
            </div>
          </div>
          <div style="height: 500px;border: 1px solid darkgrey;border-radius: 5px;margin: 5px">
            <div style="height: 35px;background-color: deepskyblue">
              <p style="color: white;font-weight: bolder;font-size: 16px;padding: 3px;padding-left: 10px">
                Chi tiết dịch vụ
              </p>
            </div>
            <div class="flex">
              <div style="width: 55%;height:445px;border: 1px solid darkgrey;border-radius: 5px;margin: 5px">
                <h3 style="font-weight: bolder;font-size: 16px;padding: 5px">Danh sách dịch vụ sử dụng</h3>
                <nz-table #basicTable2 [nzData]="detailsService">
                  <thead>
                  <tr>
                    <th>STT</th>
                    <th>Tên dịch vụ</th>
                    <th>Số lượng</th>
                    <th>Thời gian đặt</th>
                    <th>Đơn giá</th>
                    <th>Tổng</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let data of basicTable2.data;let i = index;">
                    <td>{{ i + 1 }}</td>
                    <td>{{ data.tenDichVu }}</td>
                    <td>{{ data.soLuong }}</td>
                    <td>{{ data.thoiGianDat | date : 'dd-MM-yyyy hh:mm:ss' }}</td>
                    <td>{{ data.giaDichVu}}</td>
                    <td>{{ data.giaDichVu * data.soLuong}}</td>
                  </tr>
                  </tbody>
                </nz-table>
                <div style="margin: 5px">
                  <p style="color: deepskyblue;font-weight: bolder;font-size: 18px">Tổng tiền dịch vụ: {{tongTienDichVu | currencyFormat}}</p>
                </div>
              </div>
              <div style="width: 43%;height:445px;border: 1px solid darkgrey;border-radius: 5px;margin: 5px">
                <h3 style="font-weight: bolder;font-size: 16px;padding: 5px">Order dịch vụ</h3>
                <div *ngIf="roomModel.trangThai !== 3" nz-row>
                  <div *ngFor="let data of roomServiceModel" nz-col nzSpan="8">
                    <div (click)="showFormOrderDichVu(data.id)"
                         style="border: 1px solid gray;border-radius: 5px;margin: 10px;height: 180px;">
                      <div style="width: 90%;height: 60%;margin: 3px">
                        <img src="./assets/images/ruou-vang.jpg" style="width: 100%;height: 100%">
                      </div>
                      <div style="padding: 5px;font-weight: bolder">
                        <h1>{{data.tenDichVu}}</h1>
                        <h1>Giá: {{data.giaDichVu}}</h1>
                      </div>
                    </div>
                  </div>
                </div>
                <div *ngIf="roomModel.trangThai === 3" nz-row>
                  <div *ngFor="let data of roomServiceModel" nz-col nzSpan="8">
                    <div
                         style="border: 1px solid gray;border-radius: 5px;margin: 10px;height: 180px;">
                      <div style="width: 90%;height: 60%;margin: 3px">
                        <img src="./assets/images/ruou-vang.jpg" style="width: 100%;height: 100%">
                      </div>
                      <div style="padding: 5px;font-weight: bolder">
                        <h1>{{data.tenDichVu}}</h1>
                        <h1>Giá: {{data.giaDichVu}}</h1>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div style="width: 30%;height: 905px;border: 1px solid darkgrey;border-radius: 5px;margin: 5px">
          <div style="height: 35px;background-color: deepskyblue">
            <p style="color: white;font-weight: bolder;font-size: 16px;padding: 3px;padding-left: 10px">Thông tin khách
              hàng</p>
          </div>
          <div style="border: 1px solid darkgrey;border-radius: 5px;margin: 5px">
            <div class="flex" style="font-size: 17px;padding: 10px;font-weight: bolder">
              <div style="width: 40%">
                <p>Mã khách hàng: </p>
                <hr>
                <p>Họ và tên: </p>
                <hr>
                <p>Số CCCD: </p>
                <hr>
                <p>Số điện thoại: </p>
                <hr>
                <p>Tổng số phòng đặt: </p>
                <hr>
              </div>
              <div style="width: 60%;color: dodgerblue">
                <p> {{roomModel.maKhachHang}}</p>
                <hr>
                <p> {{roomModel.hoTen}}</p>
                <hr>
                <p> {{roomModel.cccd}}</p>
                <hr>
                <p> {{roomModel.sdt}}</p>
                <hr>
                <p> 9999</p>
                <hr>
              </div>
            </div>
          </div>
          <!--          Thông tin check in -->
          <div *ngIf="checkInDetailModel" style="border: 1px solid darkgrey;border-radius: 5px;margin: 5px">
            <p style="text-align: center;font-weight: bolder;background-color: deepskyblue">Thông tin người nhận
              phòng</p>
          </div>
          <div *ngIf="checkInDetailModel"
               style="border: 1px solid darkgrey;border-radius: 5px;margin: 5px;font-size: 17px;font-weight: bolder;padding: 10px">
            <p>Họ tên : {{checkInDetailModel.hoTen}}</p>
            <hr style="margin: 10px">
            <p>Ngày sinh: {{checkInDetailModel.ngaySinh | date : 'dd-MM-yyyy'}}</p>
            <hr style="margin: 10px">
            <p>Số điện thoại: {{checkInDetailModel.sdt}}</p>
            <hr style="margin: 10px">
            <p>Giới tính: {{checkInDetailModel.gioiTinh == 0 ? 'Nam' : 'Nữ'}}</p>
            <hr style="margin: 10px">
            <p>Số CCCD: {{checkInDetailModel.cccd}}</p>
            <hr style="margin: 10px">
            <p>Ngày nhận phòng: {{checkInDetailModel.ngayNhanPhong | date : 'dd-MM-yyyy'}}</p>
            <hr style="margin: 10px">
          </div>
          <div style="border: 1px solid darkgrey;border-radius: 5px;margin: 5px">
            <p style="text-align: center;font-weight: bolder;background-color: deepskyblue">Thông tin thanh toán</p>
          </div>
          <div
            style="border: 1px solid darkgrey;border-radius: 5px;margin: 5px;font-size: 17px;font-weight: bolder;padding: 10px">
            <p>Mã hóa đơn: {{roomModel.maHD}}</p>
            <hr style="margin: 10px">
            <p>Ngày tạo: {{roomModel.ngayTao | date : 'dd-MM-yyyy hh:mm:ss'}}</p>
            <hr style="margin: 10px">
            <p>Tổng tiền: {{roomModel.tongTien}}</p>
            <hr style="margin: 10px">
            <p>Trạng thái thanh
              toán: {{roomModel.trangThaiThanhToan == 0 ? 'Đã thanh toán' : (roomModel.trangThaiThanhToan == 1 || roomModel.trangThaiThanhToan == 3) ? 'Thanh toán sau' : roomModel.trangThaiThanhToan == 4 ? 'Đang xác nhận' : 'Đã hủy'}}</p>
            <hr style="margin: 10px">
            <p>Ngày thanh toán: {{roomModel.ngayThanhToan | date : 'dd-MM-yyyy hh:mm:ss'}}</p>
            <hr style="margin: 10px">
          </div>
          <div *ngIf="roomModel.trangThaiThanhToan == 3">
            <!--            <button style="width: 98%;height:35px;color:white;font-weight:bolder;margin: 5px;background-color: #4cb3fd;border-radius: 5px">Xác nhận thanh toán</button>-->
            <button (click)="updateBillStatus(roomModel.idHoaDon, roomModel.idDatPhong)" style="width: 98%;margin: 5px;" class="relative inline-flex items-center justify-center p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium
      text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-yellow-500 group-hover:from-cyan-500
      group-hover:to-yellow-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-cyan-200 dark:focus:ring-cyan-800">
                <span style="width: 100%;"
                      class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0">
          Xác nhận thanh toán
                </span>
            </button>
          </div>
          <div *ngIf="roomModel.trangThaiThanhToan == 0">
            <p style="font-size: 22px;font-weight: bolder;color: #5e2ced;text-align: center;padding: 8px">>>>>>>>> Đã thanh toán <<<<<<<<<</p>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</nz-modal>
<nz-modal
  [(nzVisible)]="isVisibleCheckIn"
  nzTitle="THÔNG TIN NHẬN PHÒNG"
  (nzOnCancel)="handleCancelCheckIn()"
  (nzOnOk)="createCheckIn()"
  nzWidth="450px"
  nzOkText="Hoàn thành"
  nzCancelText="Trở về"
  nzFooter=" "
>
  <ng-container *nzModalContent>
    <form nz-form [formGroup]="formCheckIn" (ngSubmit)="createCheckIn()">
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Số CCCD</nz-form-label>
        <nz-form-control nzHasFeedback nzErrorTip="Input is required">
          <input nz-input id="cccdCheckIn" formControlName="cccdCheckIn" required/>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Họ tên</nz-form-label>
        <nz-form-control nzHasFeedback nzErrorTip="MaxLength is 6">
          <input nz-input formControlName="hoTenCheckIn" required/>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Ngày sinh</nz-form-label>
        <nz-form-control nzHasFeedback nzErrorTip="MinLength is 6">
          <input type="date" nz-input formControlName="ngaySinhCheckIn" required/>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Giới tính</nz-form-label>
        <nz-form-control nzHasFeedback nzErrorTip="Email is not valid">
          <select id="gioiTinhCheckIn" class="select-input"
                  style="width: 200px;height: 30px;font-size: 18px;border-width: 1px; border-style: solid; border-color: dodgerblue;border-radius: 3px;"
                  formControlName="gioiTinhCheckIn">
            <option class="option" value="0">Nam</option>
            <option class="option" value="1">Nữ</option>
          </select>

        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">SĐT</nz-form-label>
        <nz-form-control nzHasFeedback nzErrorTip="Pattern not match">
          <input nz-input formControlName="sdtCheckIn"/>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Ghi chú</nz-form-label>
        <nz-form-control nzHasFeedback>
          <input
            nz-input
            formControlName="ghiChuCheckIn"
            required
          />
        </nz-form-control>
      </nz-form-item>
      <br>
      <nz-form-item>
        <nz-form-control>
          <button nz-button nzType="primary" style="width: 100%" [disabled]="formCheckIn.invalid">Hoàn thành</button>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-container>
</nz-modal>
<nz-modal
  [(nzVisible)]="isVisibleCheckOut"
  nzTitle="THÔNG TIN TRẢ PHÒNG"
  (nzOnCancel)="handleCancelCheckOut()"
  (nzOnOk)="createCheckOut()"
  nzWidth="450px"
  nzOkText="Hoàn thành"
  nzCancelText="Trở về"
  nzFooter=" "
>
  <ng-container *nzModalContent>
    <form nz-form [formGroup]="formCheckOut" (ngSubmit)="createCheckOut()">
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Số CCCD</nz-form-label>
        <nz-form-control nzHasFeedback nzErrorTip="Input is required">
          <input nz-input id="cccdCheckOut" formControlName="cccdCheckOut" required/>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Họ tên</nz-form-label>
        <nz-form-control nzHasFeedback nzErrorTip="MaxLength is 6">
          <input nz-input formControlName="hoTenCheckOut" required/>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="5">Ngày sinh</nz-form-label>
        <nz-form-control nzHasFeedback nzErrorTip="MinLength is 6">
          <input type="date" nz-input formControlName="ngaySinhCheckOut" required/>
        </nz-form-control>
      </nz-form-item>
      <br>
      <nz-form-item>
        <nz-form-control>
          <button nz-button nzType="primary" style="width: 100%" [disabled]="formCheckOut.invalid">Hoàn thành</button>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-container>
</nz-modal>

<nz-modal
  [(nzVisible)]="isVisibleOrderForm"
  nzTitle="ĐIỀN THÔNG TIN ĐẶT PHÒNG"
  (nzOnCancel)="cancelOrderForm()"
  (nzOnOk)="saveOrderForm()"
  nzWidth="full"
>
  <ng-container *nzModalContent>
    <div [formGroup]="roomOrderForm" (ngSubmit)="saveOrderForm()">
      <h2 class="form-text-order">Thông tin khách hàng</h2>
      <hr/>
      <br>
      <div class="flex">
        <nz-card style="width: 18%;border: 1px solid lightskyblue;border-radius: 6px">

          <nz-form-item>
            <nz-form-label nzFor="cccd">Số CCCD khách hàng</nz-form-label>
            <nz-form-control nzErrorTip="Vui lòng nhập số cccd">
              <input nz-input type="text" id="cccd" formControlName="cccd" placeholder="Số CCCD" [maxLength]="15"
                     style="border-radius: 5px;border: 1px solid deepskyblue" (blur)="handleByCCCD()">
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label nzFor="hoTen">Tên khách hàng</nz-form-label>
            <nz-form-control nzErrorTip="Vui lòng nhập tên khách hàng">
              <input nz-input type="text" id="ten" formControlName="hoTen" placeholder="Họ tên" [ngModel]="hoTen"
                     style="border-radius: 5px;border: 1px solid deepskyblue">
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label nzFor="ngaySinh">Ngày sinh khách hàng</nz-form-label>
            <nz-form-control nzErrorTip="Vui lòng nhập ngày sinh">
              <input type="date" id="ngaySinh" formControlName="ngaySinh"
                     style="border-radius: 5px;border: 1px solid deepskyblue">
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label nzFor="sdt">SĐT Khách hàng</nz-form-label>
            <nz-form-control nzErrorTip="Vui lòng nhập SĐT">
              <input nz-input type="number" id="sdt" formControlName="sdt" placeholder="SĐT" [maxLength]="10"
                     [ngModel]="sdt"
                     style="border-radius: 5px;border: 1px solid deepskyblue">
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label nzFor="ghiChu">Ghi chú</nz-form-label>
            <br>
            <div>
              <nz-form-control nzErrorTip="Vui lòng nhập ghi chú">
                <textarea style="border-radius: 5px;border: 1px solid deepskyblue" rows="6" cols="38" id="ghiChu"
                          formControlName="ghiChu"></textarea>
              </nz-form-control>
            </div>
          </nz-form-item>
        </nz-card>
        <nz-card style="width: 80%;border: 1px solid lightskyblue;border-radius: 6px;margin-left: 10px">
          <div
            style="border: 1px solid darkgrey;border-radius: 5px;margin: 5px;font-size: 17px;font-weight: bolder;padding: 15px">
            <div>
              <p>Ngày nhận phòng: {{checkInSearch | date : 'dd-MM-yyyy'}}</p>

            </div>
            <div>
              <p>Ngày trả phòng: {{checkOutSearch | date : 'dd-MM-yyyy'}}</p>
            </div>
            <div>
              <p>Giá phòng: {{roomMapMd.giaTheoNgay}}/ngày</p>
            </div>
            <div>
              <p>Tổng tiền: <span>{{(calculateTotalDays() * (roomMapMd.giaTheoNgay ?? 0)) | currencyFormat}}</span>
                <input id="tongGia" formControlName="tongGia" class="form-input-total"
                       [value]="(calculateTotalDays() * (roomMapMd.giaTheoNgay ?? 0))"
                       type="hidden"/>
              </p>
            </div>
            <div>
              <p>Tổng thanh toán: <span>{{(calculateTotalDays() * (roomMapMd.giaTheoNgay ?? 0)) + tongTien | currencyFormat}}</span>
              </p>
            </div>
          </div>
          <div style="margin-top: 10px;width: 100%">
            <button style="float: right;margin: 10px" (click)="showMoreRoom()" class="button-blue">Thêm phòng</button>
          </div>
          <div *ngIf="showListMoreRoom">
            <nz-table #dataListMore [nzData]="dataList">
              <thead>
              <tr>
                <th>Số phòng</th>
                <th>Loại phòng</th>
                <th>Giá phòng</th>
                <th>Tiện ích</th>
                <th>Ngày nhận phòng</th>
                <th>Ngày trả phòng</th>
                <th>Tổng tiền</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let data of dataListMore.data">
                <td>{{ data.ma }}</td>
                <td>{{ data.tenLoaiPhong }}</td>
                <td>{{ data.giaTheoNgay }}</td>
                <td>{{ data.tienIch }}</td>
                <td>{{checkInSearch | date : 'dd-MM-yyyy'}}</td>
                <td>{{checkOutSearch | date : 'dd-MM-yyyy'}}</td>
                <td>{{(calculateTotalDays() * (data.giaTheoNgay ?? 0)) | currencyFormat}}</td>
              </tr>
              </tbody>
            </nz-table>
          </div>
        </nz-card>

      </div>
    </div>
  </ng-container>
</nz-modal>

<nz-modal
  [(nzVisible)]="isVisibleMoreRoom"
  nzTitle="Chọn thêm phòng"
  (nzOnCancel)="cancelMoreRoom()"
  (nzOnOk)="okMoreRoom()"
  nzWidth="1000px"
  nzCentered
>
  <ng-container *nzModalContent>
    <nz-table
      #rowSelectionTable
      nzShowSizeChanger
      [nzData]="roomMap2"
    >
      <thead>
      <tr>
        <th
        ></th>
        <th>Số phòng</th>
        <th>Loại phòng</th>
        <th>Giá phòng</th>
        <th>Số người</th>
        <th>Tiện ích</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let data of rowSelectionTable.data">
        <td>
          <nz-checkbox-wrapper>
            <label nz-checkbox [nzValue]="data.id" (change)="addRoomToList(data.id, $event)"></label>
          </nz-checkbox-wrapper>
        </td>
        <td>{{ data.ma }}</td>
        <td>{{ data.tenLoaiPhong }}</td>
        <td>{{ data.giaTheoNgay }}</td>
        <td>{{ data.soNguoi }}</td>
        <td>{{ data.tienIch }}</td>
      </tr>
      </tbody>
    </nz-table>
  </ng-container>
</nz-modal>

<!--Order dịch vụ-->
<nz-modal
  [(nzVisible)]="isVisibleDichVu"
  nzTitle="Nhập số lượng"
  (nzOnCancel)="cancelDichVu()"
  (nzOnOk)="okDichVu()"
  nzWidth="300px"
  nzCentered
>
  <ng-container *nzModalContent>
    <div>
      <input type="number" id="soLuong"
             style="width:250px;height:30px;border-radius: 3px;border: 1px solid deepskyblue;margin: 5px">
    </div>
  </ng-container>
</nz-modal>

<!--<nz-spin [nzSpinning]="isVisibleSpin" nzTip="Loading...">-->
<!--  <nz-alert-->
<!--    nzType="info"-->
<!--    nzMessage="Alert message title"-->
<!--    nzDescription="Further details about the context of this alert."-->
<!--  ></nz-alert>-->
<!--</nz-spin>-->






